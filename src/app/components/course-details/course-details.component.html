<app-loader></app-loader>

<ng-container *ngIf="course$ | async as course">
  <mat-card>
    <mat-card-header>
      <mat-card-title> {{ course.title }}</mat-card-title>
      <mat-card-subtitle>
        <div>{{ course.description }}</div>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <h2>Lessons</h2>
      <mat-accordion>
        <mat-expansion-panel
          *ngFor="let lesson of course.lessons | lessonOrder; let i = index"
          [expanded]="i === expandedIndex"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Lesson {{ lesson.order }} </mat-panel-title>
            <mat-panel-description>
              {{ lesson.title }}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p *ngIf="lesson.status === lessonStatus.Locked">
            This lesson is currently locked.
          </p>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>
  </mat-card>
</ng-container>
